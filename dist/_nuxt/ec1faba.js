(window.webpackJsonp=window.webpackJsonp||[]).push([[27,7,25,35],{667:function(t,e,r){"use strict";r.r(e);var n=r(31),l=(r(88),r(28),r(81),r(4),r(55),r(38),r(43),r(677),r(396),r(82),r(678)),o=r.n(l),c=r(148),d=r.n(c),m={props:{raw:{type:Boolean,default:!1},src:{type:String,default:null,required:null},title:{type:String,default:null},thumb:{type:Boolean,default:!1},size:{type:String,default:null},cssClass:{type:String,default:null},contain:{type:Boolean,default:!1},ignoreCache:{type:Boolean,default:!1}},data:function(){return{url:null}},created:function(){this.load()},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.src){e.next=16;break}if(r=t.src.replace("/images","/thumbs"),!t.thumb){e.next=6;break}return e.next=5,t.loadURL(r);case 5:t.url=e.sent;case 6:if(t.url){e.next=14;break}return e.next=9,t.loadURL(t.src);case 9:if(t.url=e.sent,t.thumb||t.url||!t.$nuxt.isOffline){e.next=14;break}return e.next=13,t.loadURL(r);case 13:t.url=e.sent;case 14:if(t.url){e.next=16;break}return e.abrupt("return",t.src);case 16:case"end":return e.stop()}}),e)})))()},loadURL:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=o.a.MD5(t).toString(),r.next=3,e.getLocalItem(n);case 3:if(!(l=r.sent)||e.ignoreCache){r.next=8;break}return r.abrupt("return",URL.createObjectURL(l));case 8:return r.prev=8,r.next=11,e.cacheUrl(t);case 11:return r.abrupt("return",r.sent);case 14:return r.prev=14,r.t0=r.catch(8),r.abrupt("return",null);case 17:case"end":return r.stop()}}),r,null,[[8,14]])})))()},cacheUrl:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,c,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t,t.startsWith("http")||t.startsWith("/_nuxt/")||(n="https://cronograma-personalizado-backend.cultivardigital.com.br"+t),r.next=4,d.a.get(n,{responseType:"arraybuffer"});case 4:return l=r.sent,c=new Blob([l.data],{type:"image/jpg"}),m=o.a.MD5(t).toString(),r.next=9,e.setLocalItem(m,c);case 9:return r.abrupt("return",URL.createObjectURL(c));case 10:case"end":return r.stop()}}),r)})))()}}},f=r(22),h=r(21),v=r.n(h),x=r(215),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.raw&&t.url?r("img",{key:t.src,class:t.cssClass,staticStyle:{"max-width":"100%"},attrs:{src:t.url,width:t.size,height:t.size,alt:t.title,title:t.title}}):t.url?r("v-img",{key:t.src,class:t.cssClass,attrs:{src:t.url,width:t.size,height:t.size,alt:t.title,title:t.title,contain:t.contain,fluid:""}}):t._e()}),[],!1,null,null,null);e.default=component.exports;v()(component,{VImg:x.a})},669:function(t,e,r){"use strict";r.r(e);var n={props:{id:{type:String,default:null},user:{type:Object,default:null},size:{type:String,default:"48"},color:{type:String,default:"primary"},iconColor:{type:String,default:null},thumb:{type:Boolean,default:!1}},data:function(){return{dialog:!1,profile:null}},computed:{sameUser:function(){return this.$auth.user&&this.profile&&this.profile._id&&this.$auth.user.id===this.profile._id}},watch:{"$auth.user":function(){this.setProfile()}},created:function(){this.setProfile()},methods:{setProfile:function(){this.user?this.profile=this.user:this.profile=this.$auth.user}}},l=r(22),o=r(21),c=r.n(o),d=r(258),m=r(248),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-inline-block pointer"},[t.profile&&t.profile.picture?r("v-avatar",{attrs:{size:t.size,color:t.color}},[r("CachedImage",{attrs:{avatar:"",title:t.profile.name,alt:t.profile.name,src:t.profile.picture,size:t.size,color:t.color,thumb:t.thumb}})],1):r("v-avatar",{attrs:{color:t.color,size:t.size}},[r("v-icon",{attrs:{color:t.iconColor,size:t.size/2,dark:""}},[t._v(" mdi-account ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{CachedImage:r(667).default}),c()(component,{VAvatar:d.a,VIcon:m.a})},679:function(t,e){},680:function(t,e,r){"use strict";r.r(e);var n={components:{VueEasyLightbox:r(693).a},props:{images:{type:Array,default:function(){return[]},required:!0},alt:{type:String,default:null},thumb:{type:Boolean,default:!0}},data:function(){return{visible:!1,index:0,apiURL:"https://cronograma-personalizado-backend.cultivardigital.com.br"}},methods:{showImg:function(t){this.index=t,this.visible=!0},handleHide:function(){this.visible=!1}}},l=r(22),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("div",t._l(t.images,(function(image,i){return r("div",{key:i,staticClass:"mr-1 mb-1 d-inline-block pointer",on:{click:function(){return t.showImg(i)}}},[r("CachedImage",{attrs:{src:image,thumb:t.thumb,size:"42","css-class":"rounded",title:t.alt,raw:""}})],1)})),0),t._v(" "),r("client-only",[r("vue-easy-lightbox",{attrs:{visible:t.visible,imgs:t.images.map((function(img){return t.apiURL+img})),index:t.index},on:{hide:t.handleHide}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CachedImage:r(667).default})},727:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{form:{user:this.$route.params.id,message:null,images:[]}}},methods:{addImage:function(image){image&&this.form.images.push(image)},save:function(){var t=this;this.form.message&&this.$axios.$post("/v1/messages",this.form).then((function(e){t.$notifier.success("Mensagem enviada!"),t.$emit("change",e),t.form.message=null,t.form.images=[]}))}}},l=r(22),o=r(21),c=r.n(o),d=r(253),m=r(248),f=r(162),h=r(257),v=r(91),x=r(657),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"message-form",attrs:{id:"message-form"}},[r("v-list-item",{staticClass:"mb-1 pt-1"},[r("v-list-item-avatar",[r("User",{attrs:{thumb:"",size:"40"}})],1),t._v(" "),r("v-list-item-content",[t.$auth.user?r("div",[r("v-textarea",{attrs:{color:"primary",outlined:"",rows:"1","auto-grow":"","hide-details":"",placeholder:"Digite uma mensagem"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1):r("v-btn",{staticClass:"darken-1",attrs:{block:"",color:"primary",large:""},on:{click:function(e){return t.$store.dispatch("showPortal")}}},[r("v-icon",[t._v("mdi-send")])],1),t._v(" "),t.$auth.user?r("div",{staticClass:"w-100"},[r("div",[t.form.images.length?r("div",{staticClass:"pt-2"},[r("Gallery",{attrs:{images:t.form.images}})],1):t._e(),t._v(" "),r("div",{staticClass:"text-right"},[r("UploadImage",{attrs:{prefix:"messages",button:""},on:{input:t.addImage}}),t._v(" "),t.form.message?r("v-btn",{staticClass:"mt-md-2",attrs:{color:"primary",large:""},on:{click:t.save}},[r("v-icon",[t._v("mdi-send")])],1):t._e()],1)])]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{User:r(669).default,Gallery:r(680).default,UploadImage:r(413).default}),c()(component,{VBtn:d.a,VIcon:m.a,VListItem:f.a,VListItemAvatar:h.a,VListItemContent:v.b,VTextarea:x.a})}}]);