(window.webpackJsonp=window.webpackJsonp||[]).push([[46,4,11,22,24,26,30,31,32,34,38],{1039:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{conversation:null}},created:function(){this.load()},methods:{load:function(){var t=this;this.$axios.$get("/v1/conversations/"+this.$route.params.id).then((function(e){t.conversation=e}))}}},o=r(19),l=r(20),c=r.n(l),m=r(269),d=r(258),v=r(163),f=r(260),h=r(91),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("TopNavigation",{attrs:{links:[["Feramentas","/ferramentas"],["Comunidade","/ferramentas/comunidade"]],active:"Conversa"}}),t._v(" "),t.conversation?r("div",[r("v-list",{attrs:{subheader:"",dense:""}},[r("v-list-item",[r("v-list-item-avatar",[r("User",{attrs:{user:t.conversation.user,thumb:"",size:"40"}})],1),t._v(" "),r("v-list-item-content",[r("h2",{staticClass:"mb-3"},[t._v(t._s(t.conversation.subject))]),t._v(" "),t.conversation.message?r("p",{staticClass:"mb-3"},[t._v("\n            "+t._s(t.conversation.message)+"\n          ")]):t._e(),t._v(" "),t.conversation.tags&&t.conversation.tags.length?r("div",{staticClass:"mb-2"},t._l(t.conversation.tags,(function(e){return r("v-chip",{key:e,staticClass:"mr-1 mb-1",attrs:{small:"",color:"primary",to:"/ferramentas/comunidade?tag="+e}},[t._v(t._s(e))])})),1):t._e(),t._v(" "),t.conversation.species&&t.conversation.species.length?r("div",{staticClass:"mb-3"},t._l(t.conversation.species,(function(t){return r("SpecieChip",{key:t,attrs:{value:t,to:"/ferramentas/comunidade?specie="+t}})})),1):t._e(),t._v(" "),t.$auth.user&&t.$auth.user.id===t.conversation.user._id?r("ConversationForm",{attrs:{conversation:t.conversation},on:{change:t.load}}):t._e()],1)],1)],1),t._v(" "),r("Comments",{attrs:{target:"conversation-"+t.conversation._id,conversation:t.conversation._id}})],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{TopNavigation:r(669).default,User:r(668).default,SpecieChip:r(679).default,ConversationForm:r(720).default,Comments:r(689).default}),c()(component,{VChip:m.a,VList:d.a,VListItem:v.a,VListItemAvatar:f.a,VListItemContent:h.b})},666:function(t,e,r){"use strict";r.r(e);var n=r(31),o=(r(88),r(28),r(66),r(4),r(57),r(38),r(43),r(673),r(400),r(82),r(674)),l=r.n(o),c=r(150),m=r.n(c),d={props:{raw:{type:Boolean,default:!1},src:{type:String,default:null,required:null},title:{type:String,default:null},thumb:{type:Boolean,default:!1},size:{type:String,default:null},cssClass:{type:String,default:null},contain:{type:Boolean,default:!1},ignoreCache:{type:Boolean,default:!1}},data:function(){return{url:null}},created:function(){this.load()},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.src){e.next=16;break}if(r=t.src.replace("/images","/thumbs"),!t.thumb){e.next=6;break}return e.next=5,t.loadURL(r);case 5:t.url=e.sent;case 6:if(t.url){e.next=14;break}return e.next=9,t.loadURL(t.src);case 9:if(t.url=e.sent,t.thumb||t.url||!t.$nuxt.isOffline){e.next=14;break}return e.next=13,t.loadURL(r);case 13:t.url=e.sent;case 14:if(t.url){e.next=16;break}return e.abrupt("return",t.src);case 16:case"end":return e.stop()}}),e)})))()},loadURL:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=l.a.MD5(t).toString(),r.next=3,e.getLocalItem(n);case 3:if(!(o=r.sent)||e.ignoreCache){r.next=8;break}return r.abrupt("return",URL.createObjectURL(o));case 8:return r.prev=8,r.next=11,e.cacheUrl(t);case 11:return r.abrupt("return",r.sent);case 14:return r.prev=14,r.t0=r.catch(8),r.abrupt("return",null);case 17:case"end":return r.stop()}}),r,null,[[8,14]])})))()},cacheUrl:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t,t.startsWith("http")||t.startsWith("/_nuxt/")||(n="https://www.cultivarbrasil.com"+t),r.next=4,m.a.get(n,{responseType:"arraybuffer"});case 4:return o=r.sent,c=new Blob([o.data],{type:"image/jpg"}),d=l.a.MD5(t).toString(),r.next=9,e.setLocalItem(d,c);case 9:return r.abrupt("return",URL.createObjectURL(c));case 10:case"end":return r.stop()}}),r)})))()}}},v=r(19),f=r(20),h=r.n(f),_=r(209),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.raw&&t.url?r("img",{key:t.src,class:t.cssClass,staticStyle:{"max-width":"100%"},attrs:{src:t.url,width:t.size,height:t.size,alt:t.title,title:t.title}}):t.url?r("v-img",{key:t.src,class:t.cssClass,attrs:{src:t.url,width:t.size,height:t.size,alt:t.title,title:t.title,contain:t.contain,fluid:""}}):t._e()}),[],!1,null,null,null);e.default=component.exports;h()(component,{VImg:_.a})},668:function(t,e,r){"use strict";r.r(e);var n={props:{id:{type:String,default:null},user:{type:Object,default:null},size:{type:String,default:"48"},color:{type:String,default:"primary"},iconColor:{type:String,default:null},thumb:{type:Boolean,default:!1}},data:function(){return{dialog:!1,profile:null}},computed:{sameUser:function(){return this.$auth.user&&this.profile&&this.profile._id&&this.$auth.user.id===this.profile._id}},watch:{"$auth.user":function(){this.setProfile()}},created:function(){this.setProfile()},methods:{setProfile:function(){this.user?this.profile=this.user:this.profile=this.$auth.user},userClicked:function(){console.log(this.profile),this.dialog=!0}}},o=r(19),l=r(20),c=r.n(l),m=r(261),d=r(221),v=r(265),f=r(122),h=r(652),_=r(268),k=r(257),C=r(656),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-inline-block pointer"},[t.profile&&t.profile.picture?r("v-avatar",{attrs:{size:t.size,color:t.color},on:{click:t.userClicked}},[r("CachedImage",{attrs:{avatar:"",title:t.profile.name,alt:t.profile.name,src:t.profile.picture,size:t.size,color:t.color,thumb:t.thumb}})],1):r("v-avatar",{attrs:{color:t.color,size:t.size},on:{click:t.userClicked}},[r("v-icon",{attrs:{color:t.iconColor,size:t.size/2,dark:""}},[t._v(" mdi-account ")])],1),t._v(" "),r("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("div",{staticClass:"text-center pt-6 px-3"},[t.profile&&t.profile.picture?r("v-avatar",{staticClass:"mr-3",attrs:{size:"64"}},[r("CachedImage",{attrs:{avatar:"",title:t.profile.name,alt:t.profile.name,src:t.profile.picture,size:"64",thumb:""}})],1):r("v-avatar",{attrs:{color:"primary",size:"64"}},[r("v-icon",{attrs:{size:"32",dark:""}},[t._v(" mdi-account ")])],1),t._v(" "),r("h5",{staticClass:"text-h5"},[t._v(t._s(t.profile.name))]),t._v(" "),t.profile.region?r("p",{staticClass:"text-subtitle"},[t.profile.city&&t.profile.uf?r("small",[t._v("\n            ("+t._s([t.profile.city,t.profile.uf].join(" - "))+")\n          ")]):t.profile.region?r("small",[t._v("("+t._s(t.profile.region)+")")]):t._e()]):t._e(),t._v(" "),t.profile.bio?r("p",[t._v(t._s(t.profile.bio))]):t._e(),t._v(" "),r("p",[t.sameUser?r("v-btn",{on:{click:function(e){return t.$store.dispatch("showPortal")}}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-account-edit")]),t._v(" Editar perfil\n          ")],1):t._e()],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Fechar ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{CachedImage:r(666).default}),c()(component,{VAvatar:m.a,VBtn:d.a,VCard:v.a,VCardActions:f.a,VDialog:h.a,VDivider:_.a,VIcon:k.a,VSpacer:C.a})},669:function(t,e,r){"use strict";r.r(e);var n=r(54),o=(r(30),r(67),r(98),r(7),r(53),{props:{links:{type:Array,default:function(){return null}},active:{type:String,default:""},description:{type:String,default:""},img:{type:String,default:""},color:{type:String,default:"brown"}},head:function(){var meta=[{hid:"description",name:"description",content:this.pageDescription()},{hid:"og:description",name:"og:description",content:this.pageDescription()},{hid:"og:title",name:"og:title",content:this.pageTitle()},{hid:"og:url",name:"og:url",content:this.apiURL+this.$route.path}];return this.img&&meta.push({hid:"og:image",name:"og:image",content:this.img}),{title:this.pageTitle(),meta:meta}},computed:{previousPage:function(){return this.links&&this.links.length?this.links[this.links.length-1][1]:"/"},apiURL:function(){return"https://www.cultivarbrasil.com"}},created:function(){this.$store.dispatch("setPage",{name:this.active,title:this.pageTitle(),description:this.pageDescription(),links:this.links})},methods:{pageTitle:function(){var t=this.links||[];return["Cultivar Brasil"].concat(Object(n.a)(t.map((function(link){return link[0]}))),[this.active]).reverse().join(" | ")},pageDescription:function(){return this.description||"Cultive plantas em casa, tenha mais saúde, economize e melhore sua renda com este App incrível!"},toggleDrawer:function(){this.$store.dispatch("toggleDrawer",!this.$store.state.showDrawer)}}}),l=r(19),c=r(20),m=r.n(c),d=r(682),v=r(683),f=r(684),h=r(261),_=r(221),k=r(257),C=r(656),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-4"},[n("v-app-bar",{attrs:{app:"",color:"primary",dark:"","hide-on-scroll":""}},["/"!==t.$route.path?n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$router.replace(t.previousPage)}}},[n("v-icon",[t._v(" mdi-arrow-left ")])],1):n("v-app-bar-nav-icon",{on:{click:t.toggleDrawer}}),t._v(" "),"/"===t.$route.path?n("v-spacer"):t._e(),t._v(" "),"/"===t.$route.path?n("img",{attrs:{title:"Cultivar Brasil",src:r(670),width:"28"}}):n("v-app-bar-title",[n("strong",[n("small",[t._v(t._s(t.active))])])]),t._v(" "),n("v-spacer"),t._v(" "),n("a",{on:{click:function(e){return t.$store.dispatch("showPortal")}}},[t.$auth.user?n("User",{attrs:{size:"25"}}):n("v-avatar",{attrs:{color:"white",size:"25"}},[n("v-icon",{attrs:{color:"primary",dark:""}},[t._v(" mdi-account ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{User:r(668).default}),m()(component,{VAppBar:d.a,VAppBarNavIcon:v.a,VAppBarTitle:f.a,VAvatar:h.a,VBtn:_.a,VIcon:k.a,VSpacer:C.a})},670:function(t,e,r){t.exports=r.p+"img/cultivar-logo-branca.a4b3bbe.png"},675:function(t,e){},677:function(t){t.exports=JSON.parse('["Debate","Dúvida","Ideia","Pedido","Reclamação","Sugestão"]')},679:function(t,e,r){"use strict";r.r(e);r(89),r(4),r(32);var n={props:{value:{type:[String,Object],default:null,required:!0},to:{type:String,default:null}},computed:{species:function(){return this.$store.state.species},link:function(){return this.specie&&this.specie.id?"/ferramentas/catalogo-de-especies/"+this.specie.id:null},specie:function(){var t=this;return this.$store.state.species.find((function(e){return e.id===t.value||e.name===t.value}))||this.value}}},o=r(19),l=r(20),c=r.n(l),m=r(261),d=r(269),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.specie?r("v-chip",{staticClass:"mr-1 mb-1",attrs:{to:t.to||t.link,color:"primary"},on:{click:function(e){return t.$emit("click",t.specie)}}},[t.specie&&t.specie.images?r("v-avatar",{staticClass:"accent white--text",attrs:{left:""}},[r("CachedImage",{attrs:{title:t.specie.name,src:t.specie.images[0],thumb:""}})],1):t._e(),t._v("\n  "+t._s(t.specie.name||t.specie)+"\n")],1):t._e()}),[],!1,null,null,null);e.default=component.exports;c()(component,{CachedImage:r(666).default}),c()(component,{VAvatar:m.a,VChip:d.a})},680:function(t,e,r){"use strict";r.r(e);var n={props:{embed:{type:Object,default:function(){return null},required:!0}}},o=r(19),l=r(20),c=r.n(l),m=r(265),d=r(122),v=r(257),f=r(209),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.embed?r("div",["video"===t.embed.type&&t.embed.html?r("div",{staticClass:"mb-3",domProps:{innerHTML:t._s(t.embed.html)}}):r("v-card",{staticClass:"mb-3",attrs:{href:t.embed.url,target:"_blank",outlined:""}},[t.embed.thumbnail_url?r("v-img",{attrs:{src:t.embed.thumbnail_url}}):t._e(),t._v(" "),t.embed.title?r("v-card-title",[t._v(t._s(t.embed.title))]):t._e(),t._v(" "),t.embed.description?r("v-card-subtitle",[t._v("\n      "+t._s(t.embed.description)+"\n    ")]):t._e(),t._v(" "),t.embed.provider_name?r("v-card-text",[r("v-icon",{attrs:{left:"",size:"20"}},[t._v("\n        "+t._s("mdi-"+t.embed.provider_name.toLowerCase())+"\n      ")]),t._v("\n      "+t._s(t.embed.provider_name)+"\n    ")],1):t._e()],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports;c()(component,{VCard:m.a,VCardSubtitle:d.b,VCardText:d.c,VCardTitle:d.d,VIcon:v.a,VImg:f.a})},681:function(t,e,r){"use strict";r.r(e);var n={components:{VueEasyLightbox:r(703).a},props:{images:{type:Array,default:function(){return[]},required:!0},alt:{type:String,default:null},thumb:{type:Boolean,default:!0}},data:function(){return{visible:!1,index:0,apiURL:"https://www.cultivarbrasil.com"}},methods:{showImg:function(t){this.index=t,this.visible=!0},handleHide:function(){this.visible=!1}}},o=r(19),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("div",t._l(t.images,(function(image,i){return r("div",{key:i,staticClass:"mr-1 mb-1 d-inline-block pointer",on:{click:function(){return t.showImg(i)}}},[r("CachedImage",{attrs:{src:image,thumb:t.thumb,size:"42","css-class":"rounded",title:t.alt,raw:""}})],1)})),0),t._v(" "),r("client-only",[r("vue-easy-lightbox",{attrs:{visible:t.visible,imgs:t.images.map((function(img){return t.apiURL+img})),index:t.index},on:{hide:t.handleHide}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CachedImage:r(666).default})},685:function(t,e,r){"use strict";r.r(e);var n={props:{embeds:{type:Array,default:function(){return[]},required:!0}}},o=r(19),l=r(20),c=r.n(l),m=r(697),d=r(698),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",t._l(t.embeds,(function(embed,i){return r("v-col",{key:i,attrs:{cols:"12",lg:"3",md:"4",sm:"6"}},[r("Embed",{attrs:{embed:embed}})],1)})),1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{Embed:r(680).default}),c()(component,{VCol:m.a,VRow:d.a})},688:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{dialog:!1}},methods:{confirm:function(){this.dialog=!1,this.$emit("confirm")},cancel:function(){this.dialog=!1,this.$emit("cancel")}}},o=r(19),l=r(20),c=r.n(l),m=r(221),d=r(265),v=r(122),f=r(652),h=r(257),_=r(656),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"290"},on:{"click:outside":function(e){t.removeComment=null}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{icon:"","x-small":""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v("mdi-delete")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",{staticClass:"text-h5"},[t._v("\n      Tem certeza que deseja excluír?\n    ")]),t._v(" "),r("v-card-text",[t._v(" Esta alteração não pode ser desfeita ")]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"error",text:""},on:{click:t.cancel}},[t._v(" Não ")]),t._v(" "),r("v-btn",{attrs:{color:"green",text:""},on:{click:t.confirm}},[t._v(" Sim ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:m.a,VCard:d.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VDialog:f.a,VIcon:h.a,VSpacer:_.a})},689:function(t,e,r){"use strict";r.r(e);var n=r(31),o=(r(88),{props:{target:{type:String,default:null},conversation:{type:String,default:null}},data:function(){return{comments:null}},created:function(){this.loadComments()},methods:{loadComments:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/v1/comments",{params:{target:t.target||t.$route.path}});case 2:t.comments=e.sent;case 3:case"end":return e.stop()}}),e)})))()},commentSaved:function(t){this.loadComments(),this.$emit("change",t)},remove:function(t){var e=this;this.$axios.$delete("/v1/comments/"+t._id,{params:{target:this.target||this.$route.path}}).then((function(){e.loadComments(),e.$emit("change",t)}))}}}),l=r(19),c=r(20),m=r.n(c),d=r(268),v=r(258),f=r(163),h=r(259),_=r(91),k=r(260),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-divider",{staticClass:"my-2"}),t._v(" "),r("v-list",{attrs:{subheader:"",dense:""}},[t._l(t.comments,(function(e){return[r("v-list-item",{key:e.id},[r("v-list-item-avatar",[r("User",{attrs:{user:e.user,thumb:"",size:"40"}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.user.name)}}),t._v(" "),r("div",{directives:[{name:"linkify",rawName:"v-linkify"}],staticClass:"body-2 pt-2"},[t._v(t._s(e.message))]),t._v(" "),e.embeds.length?r("div",{staticClass:"pt-2 w-100"},[r("EmbedGallery",{attrs:{embeds:e.embeds}})],1):t._e(),t._v(" "),e.images.length?r("div",{staticClass:"pt-2"},[r("Gallery",{attrs:{images:e.images}})],1):t._e(),t._v(" "),e.members.length?r("div",{staticClass:"pt-2"},t._l(e.members,(function(t){return r("User",{key:t.id,staticClass:"mr-1 mb-1",attrs:{user:t,thumb:"",size:"32","icon-color":"white"}})})),1):t._e(),t._v(" "),e.species.length?r("div",{staticClass:"pt-2"},t._l(e.species,(function(t){return r("SpecieChip",{key:t,attrs:{value:t}})})),1):t._e()],1),t._v(" "),r("v-list-item-action",[r("v-list-item-action-text",[r("small",{staticClass:"font-weight-light",attrs:{title:t.$moment(e.createdAt).format("DD/MM/YYYY h:mm:ss")}},[t._v("\n              "+t._s(t.$moment(e.createdAt).fromNow(!0))+"\n            ")])]),t._v(" "),t.$auth.user&&e.user._id===t.$auth.user.id?r("div",[r("Remove",{on:{confirm:function(r){return t.remove(e)}}})],1):t._e()],1)],1),t._v(" "),r("v-divider",{key:"divider-"+e._id,staticClass:"my-2"})]})),t._v(" "),r("CommentForm",{attrs:{target:t.target,conversation:t.conversation},on:{change:t.commentSaved}})],2)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{User:r(668).default,EmbedGallery:r(685).default,Gallery:r(681).default,SpecieChip:r(679).default,Remove:r(688).default,CommentForm:r(692).default}),m()(component,{VDivider:d.a,VList:v.a,VListItem:f.a,VListItemAction:h.a,VListItemActionText:_.a,VListItemAvatar:k.a,VListItemContent:_.b,VListItemTitle:_.d})},690:function(t,e,r){"use strict";r.r(e);r(82);var n={props:{value:{type:String,default:function(){return null}},icon:{type:String,default:function(){return"mdi-link-box-variant-outline"}}},data:function(){return{dialog:!1,loading:!1,oembed:null,url:null}},methods:{finish:function(t){this.oembed&&this.$emit("input",this.oembed),this.oembed=null,this.url=null,this.dialog=!1},loadOEmbed:function(){var t=this;this.url&&this.url.startsWith("http")&&(this.loading=!0,this.$axios.$get("/v1/uploads/oembed?url="+encodeURI(this.url)).then((function(e){t.oembed=e,t.loading=!1})).catch((function(e){t.loading=!1,t.$notifier.firebaseError(e)})))}}},o=r(19),l=r(20),c=r.n(l),m=r(221),d=r(265),v=r(652),f=r(257),h=r(256),_=r(87),k=r(637),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{fullscreen:""},on:{input:function(e){return t.$emit("change")}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary",icon:""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v(t._s(t.icon))])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("span",[t._v("Adicionar link")])],1),t._v(" "),r("div",{staticClass:"pt-6 px-3"},[r("v-text-field",{attrs:{autocomplete:"off",name:"name",label:"Insira o link",placeholder:"http://",outlined:"","hide-details":"auto","prepend-inner-icon":"mdi-magnify"},on:{change:t.loadOEmbed},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),t._v(" "),t.loading?r("div",{staticClass:"pa-3 text-center"},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t.oembed?r("div",{staticClass:"pa-3"},[r("Embed",{attrs:{embed:t.oembed}}),t._v(" "),r("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"success",large:""},on:{click:t.finish}},[t._v("\n        Concluír\n      ")])],1):t.url&&t.url.startsWith("http")?r("div",{staticClass:"pa-3"},[r("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"success",large:""},on:{click:t.loadOEmbed}},[t._v("\n        Buscar\n      ")])],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{Embed:r(680).default}),c()(component,{VBtn:m.a,VCard:d.a,VDialog:v.a,VIcon:f.a,VProgressCircular:h.a,VTextField:_.a,VToolbar:k.a})},692:function(t,e,r){"use strict";r.r(e);var n=r(31),o=(r(88),r(8),r(4),r(36),r(62),{props:{comment:{type:String,default:null},target:{type:String,default:null},conversation:{type:String,default:null}},data:function(){return{members:[],form:{target:this.target,conversation:this.conversation,message:null,members:[],species:[],images:[],embeds:[]}}},computed:{species:function(){return this.$store.state.species},selectedMembers:function(){var t=this;return this.form.members&&this.form.members.length?this.members.filter((function(e){return t.form.members.includes(e.id)})):[]},selectedSpecies:function(){var t=this;return this.form.species&&this.form.species.length?this.species.filter((function(e){return t.form.species.includes(e.id)})):[]}},methods:{loadMembers:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.members.length){e.next=4;break}return e.next=3,t.$axios.$get("/v1/users/members");case 3:t.members=e.sent;case 4:case"end":return e.stop()}}),e)})))()},addImage:function(image){image&&this.form.images.push(image)},addUrl:function(embed){embed&&this.form.embeds.push(embed)},save:function(){var t=this;this.form.message&&this.$axios.$post("/v1/comments",this.form).then((function(e){t.$notifier.success("Comentário enviado!"),t.$emit("change",e),t.form.message=null,t.form.members=[],t.form.species=[],t.form.images=[],t.form.embeds=[]}))}}}),l=r(19),c=r(20),m=r.n(c),d=r(221),v=r(163),f=r(260),h=r(91),_=r(655),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"comment-form"},[r("v-list-item",{staticClass:"mb-1 pt-1"},[r("v-list-item-avatar",[r("User",{attrs:{thumb:"",size:"40"}})],1),t._v(" "),r("v-list-item-content",[t.$auth.user?r("div",[r("v-textarea",{attrs:{color:"primary",outlined:"",rows:"1","auto-grow":"","hide-details":"",placeholder:t.conversation?"Responda":"Comente o que achou"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1):r("v-btn",{staticClass:"darken-1",attrs:{block:"",color:"primary",large:""},on:{click:function(e){return t.$store.dispatch("showPortal")}}},[t._v("\n        "+t._s(t.conversation?"Responda":"Comente o que achou")+"\n      ")]),t._v(" "),t.$auth.user?r("div",{staticClass:"w-100"},[r("div",[t.form.embeds.length?r("div",{staticClass:"pt-2"},[r("EmbedGallery",{attrs:{embeds:t.form.embeds}})],1):t._e(),t._v(" "),t.form.images.length?r("div",{staticClass:"pt-2"},[r("Gallery",{attrs:{images:t.form.images}})],1):t._e(),t._v(" "),t.form.members.length?r("div",{staticClass:"pt-2"},t._l(t.form.members,(function(e){return r("User",{key:e,staticClass:"mr-1 mb-1",attrs:{user:t.members.find((function(t){return t.id===e})),thumb:"",size:"32","icon-color":"white"}})})),1):t._e(),t._v(" "),t.form.species.length?r("div",{staticClass:"pt-2"},t._l(t.form.species,(function(t){return r("SpecieChip",{key:t,attrs:{value:t}})})),1):t._e(),t._v(" "),r("SelectMembers",{attrs:{items:t.members,"item-value":"id","item-text":"name",title:"Adicionar membros"},on:{change:function(e){return t.loadMembers()}},model:{value:t.form.members,callback:function(e){t.$set(t.form,"members",e)},expression:"form.members"}}),t._v(" "),r("SelectSpecies",{attrs:{items:t.species},model:{value:t.form.species,callback:function(e){t.$set(t.form,"species",e)},expression:"form.species"}}),t._v(" "),r("UploadImage",{attrs:{prefix:"comments"},on:{input:t.addImage}}),t._v(" "),r("EmbedUrl",{attrs:{icon:"mdi-youtube"},on:{input:t.addUrl}}),t._v(" "),r("EmbedUrl",{on:{input:t.addUrl}})],1),t._v(" "),r("div",[r("v-btn",{staticClass:"mt-md-2",attrs:{color:"primary",block:"",large:"",disabled:!t.form.message||!t.form.message},on:{click:t.save}},[t._v("\n            "+t._s(t.conversation?"Enviar resposta":"Enviar comentário")+"\n          ")])],1)]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{User:r(668).default,EmbedGallery:r(685).default,Gallery:r(681).default,SpecieChip:r(679).default,SelectMembers:r(694).default,SelectSpecies:r(695).default,UploadImage:r(417).default,EmbedUrl:r(690).default}),m()(component,{VBtn:d.a,VListItem:v.a,VListItemAvatar:f.a,VListItemContent:h.b,VTextarea:_.a})},694:function(t,e,r){"use strict";r.r(e);r(28),r(293),r(8),r(4),r(36),r(62),r(41);var n=r(677),o={props:{value:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},itemText:{type:String,default:"text"},itemValue:{type:String,default:"value"},itemAvatar:{type:String,default:"picture"},itemIcon:{type:String,default:"mdi-account"},icon:{type:String,default:"mdi-account-plus-outline"},title:{type:String,default:"Selecionar"}},data:function(){return{categories:n,dialog:!1,options:[],search:""}},computed:{filteredItems:function(){var t=this,data=[];return this.search&&(data=this.items.filter((function(e){return e[t.itemText].toLowerCase().includes(t.search.toLowerCase())}))),data.slice(0,7)}}},l=r(19),c=r(20),m=r.n(c),d=r(221),v=r(265),f=r(661),h=r(652),_=r(268),k=r(257),C=r(209),y=r(258),x=r(163),V=r(259),$=r(260),w=r(262),S=r(91),I=r(87),O=r(637),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{fullscreen:""},on:{input:function(e){return t.$emit("change")}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary",icon:""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v(t._s(t.icon))])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("span",[t._v(t._s(t.title))])],1),t._v(" "),r("div",{staticClass:"pt-6 px-3"},[r("v-text-field",{attrs:{autocomplete:"off",name:"name",placeholder:"Buscar",outlined:"","hide-details":"auto","prepend-inner-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.search?r("v-list",[r("v-list-item-group",{attrs:{multiple:""},on:{change:function(e){return t.$emit("input",t.options)}},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}},[t._l(t.filteredItems,(function(e){return[e?t._e():r("v-divider",{key:"divider-"+e[t.itemValue]}),t._v(" "),r("v-list-item",{key:e[t.itemValue],attrs:{value:e[t.itemValue]},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.active;return[r("v-list-item-avatar",{attrs:{color:"primary"}},[e[t.itemAvatar]?r("v-img",{attrs:{src:e[t.itemAvatar]}}):r("v-icon",{attrs:{dark:""}},[t._v(t._s(t.itemIcon))])],1),t._v(" "),r("v-list-item-title",[t._v(" "+t._s(e[t.itemText])+" ")]),t._v(" "),r("v-list-item-action",[r("v-checkbox",{attrs:{"input-value":o,color:"deep-purple accent-4"}})],1)]}}],null,!0)})]}))],2)],1):r("p",{staticClass:"text-center pt-2"},[r("small",[t._v("Busque pelo nome acima")])]),t._v(" "),t.options.length?r("div",{staticClass:"pa-3"},[r("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"success",large:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        Concluír\n      ")])],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:d.a,VCard:v.a,VCheckbox:f.a,VDialog:h.a,VDivider:_.a,VIcon:k.a,VImg:C.a,VList:y.a,VListItem:x.a,VListItemAction:V.a,VListItemAvatar:$.a,VListItemGroup:w.a,VListItemTitle:S.d,VTextField:I.a,VToolbar:O.a})},695:function(t,e,r){"use strict";r.r(e);r(28),r(293),r(8),r(4),r(36),r(62),r(32),r(41);var n=r(677),o={props:{value:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}}},data:function(){return{categories:n,dialog:!1,options:[],search:""}},computed:{filteredItems:function(){var t=this,data=this.items;return this.search&&(data=this.items.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}))),data.slice(0,7)}}},l=r(19),c=r(20),m=r.n(c),d=r(221),v=r(265),f=r(661),h=r(652),_=r(268),k=r(257),C=r(258),y=r(163),x=r(259),V=r(260),$=r(262),w=r(91),S=r(87),I=r(637),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{fullscreen:""},on:{input:function(e){return t.$emit("change")}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary",icon:""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v("mdi-sprout-outline")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("span",[t._v("Selecionar espécies")])],1),t._v(" "),r("div",{staticClass:"pt-6 px-3"},[r("v-text-field",{attrs:{autocomplete:"off",name:"name",placeholder:"Buscar espécie",outlined:"","hide-details":"auto","prepend-inner-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("v-list",[r("v-list-item-group",{attrs:{multiple:""},on:{change:function(e){return t.$emit("input",t.options)}},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}},[t._l(t.filteredItems,(function(e){return[e?t._e():r("v-divider",{key:"divider-"+e.id}),t._v(" "),r("v-list-item",{key:e.id,attrs:{value:e.id},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.active;return[r("v-list-item-avatar",[e.images&&e.images.length?r("CachedImage",{attrs:{title:e.name,src:e.images[0],thumb:""}}):r("v-icon",{attrs:{dark:""}},[t._v("mdi-sprout")])],1),t._v(" "),r("v-list-item-title",[t._v(" "+t._s(e.name)+" ")]),t._v(" "),r("v-list-item-action",[r("v-checkbox",{attrs:{"input-value":o,color:"deep-purple accent-4"}})],1)]}}],null,!0)})]}))],2)],1),t._v(" "),t.options.length?r("div",{staticClass:"pa-3"},[r("v-btn",{staticClass:"mb-3",attrs:{block:"",color:"success",large:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        Concluír\n      ")])],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{CachedImage:r(666).default}),m()(component,{VBtn:d.a,VCard:v.a,VCheckbox:f.a,VDialog:h.a,VDivider:_.a,VIcon:k.a,VList:C.a,VListItem:y.a,VListItemAction:x.a,VListItemAvatar:V.a,VListItemGroup:$.a,VListItemTitle:w.d,VTextField:S.a,VToolbar:I.a})},720:function(t,e,r){"use strict";r.r(e);r(7),r(15),r(16);var n=r(24),o=r(1),l=r(31),c=(r(88),r(4),r(9),r(10),r(8),r(36),r(62),r(67),r(28),r(66),r(80)),m=r(677);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var v={components:{ValidationObserver:c.a,ValidationProvider:c.b},props:{conversation:{type:Object,default:function(){return null}}},data:function(){return{categories:m,dialog:!1,tags:[],form:{subject:"",message:"",tags:[],species:[]}}},computed:{species:function(){return this.$store.state.species}},created:function(){var t=this;this.conversation&&Object.keys(this.form).forEach((function(e){t.conversation[e]&&("species"===e?t.form.species=t.species.filter((function(r){return t.conversation[e].includes(r.id)})):t.form[e]=t.conversation[e])})),this.loadTags()},methods:{loadTags:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/v1/conversations/tags");case 2:t.tags=e.sent;case 3:case"end":return e.stop()}}),e)})))()},save:function(){var t=this,form=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.form);form.species=this.form.species.map((function(t){return"object"===Object(n.a)(t)?t.id:t})),this.conversation?this.$axios.$patch("/v1/conversations/"+this.conversation._id,form).then((function(e){t.$notifier.success("Conversa salva!"),t.$emit("change",e),t.dialog=!1})):this.$axios.$post("/v1/conversations",form).then((function(e){t.$notifier.success("Conversa iniciada!"),t.$router.replace("/ferramentas/comunidade/"+e._id),t.$emit("change",e)}))},removeSpecie:function(t){this.form.species=this.form.species.filter((function(e){return e.id!==t}))}}},f=v,h=r(19),_=r(20),k=r.n(_),C=r(261),y=r(221),x=r(265),V=r(122),$=r(269),w=r(721),S=r(652),I=r(653),O=r(257),j=r(87),L=r(655),E=r(637),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{fullscreen:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[t.conversation?r("v-btn",t._g(t._b({attrs:{small:"",fab:"",bottom:"",right:"",fixed:"",dark:"",color:"primary"}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v("mdi-pencil")])],1):r("div",{staticClass:"text-center"},[r("v-btn",t._g(t._b({attrs:{dark:"",color:"primary",large:""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{left:""}},[t._v("mdi-chat-plus")]),t._v(" Comece uma conversa\n      ")],1),t._v(" "),r("v-btn",t._g(t._b({attrs:{fab:"",bottom:"",right:"",fixed:"",color:"green",dark:""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v("mdi-chat-plus")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("span",[t._v("Comece um novo assunto")])],1),t._v(" "),r("v-card-text",{staticClass:"pt-6"},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.validate,o=e.invalid;return[r("v-form",{on:{submit:function(e){e.preventDefault(),n().then(t.save)}}},[r("div",{staticClass:"mb-6"},[r("validation-provider",{attrs:{name:"assunto",rules:"required|max:140"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("v-text-field",{attrs:{name:"name",label:"Qual o assunto dessa conversa?",outlined:"",counter:"",maxlength:"140","error-messages":n},model:{value:t.form.subject,callback:function(e){t.$set(t.form,"subject",e)},expression:"form.subject"}})]}}],null,!0)}),t._v(" "),r("validation-provider",{attrs:{name:"detalhe"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("v-textarea",{attrs:{name:"name",label:"Detalhe sua questão",outlined:"","error-messages":n},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})]}}],null,!0)}),t._v(" "),r("v-combobox",{attrs:{items:t.tags,label:"Palavras chave (#hashtags)",outlined:"",multiple:"",chips:"","small-chips":"","deletable-chips":""},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}}),t._v(" "),r("v-combobox",{attrs:{items:t.species,"item-text":"name",label:"Espécies relacionadas",outlined:"",multiple:"",chips:"","hide-details":"auto","small-chips":"","deletable-chips":""},scopedSlots:t._u([{key:"selection",fn:function(data){return[r("v-chip",t._b({key:JSON.stringify(data.item),attrs:{"input-value":data.selected,disabled:data.disabled},on:{click:function(e){return t.removeSpecie(data.item.id)}}},"v-chip",data.attrs,!1),[r("v-avatar",{staticClass:"accent white--text",attrs:{left:""}},[data.item.images?r("CachedImage",{attrs:{title:data.item.name,src:data.item.images[0],thumb:""}}):t._e()],1),t._v("\n                  "+t._s(data.item.name)+"\n                ")],1)]}}],null,!0),model:{value:t.form.species,callback:function(e){t.$set(t.form,"species",e)},expression:"form.species"}})],1),t._v(" "),r("div",{staticClass:"text-right"},[r("Save",{attrs:{invalid:o,block:!1,label:t.conversation?"Salvar conversa":"Iniciar conversa"}})],1)])]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;k()(component,{CachedImage:r(666).default,Save:r(151).default}),k()(component,{VAvatar:C.a,VBtn:y.a,VCard:x.a,VCardText:V.c,VChip:$.a,VCombobox:w.a,VDialog:S.a,VForm:I.a,VIcon:O.a,VTextField:j.a,VTextarea:L.a,VToolbar:E.a})}}]);